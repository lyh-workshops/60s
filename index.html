<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
    <title>每天 60 秒读懂世界</title>
    <style>
        * {
            margin: 0;
            padding: 0;
        }

        #app {
            display: flex;
            justify-content: center;
        }
    </style>
</head>

<body>
    <div id="app">

    </div>
    <div style="display: flex;justify-content: center;margin: 10px;">
        <span style="color: #999;">数据接口: <strong>https://60s.viki.moe/60s?v2=1</strong></span>
    </div>
    <script>
        fetch('https://60s.viki.moe/60s?v2=1')
            .then(resp => {
                if (!resp.ok) {
                    throw new Error('网络响应错误')
                }
                return resp.json()
            })
            .then(data => data.data)
            .then(data => {
                console.log(data)
                const appDiv = document.getElementById('app')
                const { news, tip, cover } = data
                const len = news.length
                const totalHeight = 400 + (len + 1) * 30;
                let svg = `<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="720" height="${totalHeight}">`
                svg += `<rect width="720" height="${totalHeight}" fill="white" stroke="#03a1ea" stroke-width="1" />`
                svg += `<image width="720" height="400" href="${cover}" />`
                for (let i = 0; i < len; i++) {
                    const text = news[i].substring(0, 40)
                    svg += `<text x="5" y="${420 + i * 30}" font-family="Arial" font-size="16" fill="blue">${text}</text>`
                }
                svg += `<text x="50%" y="${420 + len * 30}" font-family="Arial" font-size="16" fill="red" text-anchor="middle" dominant-baseline="middle" >【微语】${tip}</text>`
                svg += `</svg>`
                appDiv.innerHTML = svg
            })
            .catch(error => {
                console.log('获取数据时出错: ', error)
            })

    </script>
</body>

</html>